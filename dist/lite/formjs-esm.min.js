/* formJS Lite v4.0.2 | Valerio Di Punzio (@SimplySayHi) | https://valeriodipunzio.com/plugins/formJS/ | https://github.com/SimplySayHi/formJS | MIT license */
const e=e=>{let t=typeof e,l="string"===t&&r(document.querySelector(e))&&"form"===document.querySelector(e).tagName.toLowerCase();return{result:r(e)||l,element:"string"===t?document.querySelector(e):e}},t=e=>{let t=".";return-1===e.indexOf(t)&&(e.indexOf("-")>=0?t="-":e.indexOf("/")>=0&&(t="/")),t},r=e=>Element.prototype.isPrototypeOf(e),l=e=>NodeList.prototype.isPrototypeOf(e),o=function(e={}){for(let t=1;t<arguments.length;t++){let r=arguments[t];if(r)for(let t in r){let l="[object Array]"===Object.prototype.toString.call(r[t]),n="[object Object]"===Object.prototype.toString.call(r[t]);r.hasOwnProperty(t)&&(l?(void 0===e[t]&&(e[t]=[]),e[t]=e[t].concat(r[t].slice(0))):n?e[t]=o(e[t],r[t]):Array.isArray(e[t])?e[t].push(r[t]):e[t]=r[t])}}return e},n=e=>e.replace(/-([a-z])/gi,(e,t)=>t.toUpperCase()),i={result:!1,fieldEl:null},s={result:!0,fields:[]},a={checkbox:function(e){let t=e.fieldEl.closest("form").querySelector('[name="'+e.fieldEl.name+'"][data-checks]'),r={result:e.fieldEl.checked};return null!==t&&(r=this.checks({attrValue:t.getAttribute("data-checks"),fieldEl:t})),r},checks:function(e){try{let t=JSON.parse(e.attrValue),r=e.fieldEl,l=r.closest("form").querySelectorAll('[name="'+r.name+'"]:checked').length,o=l>=t[0],n=l<=t[1],i={result:o&&n};return i.result||(i.errors={checks:!0},o||(i.errors.minChecks=!0),n||(i.errors.maxChecks=!0)),i}catch(e){throw new Error('"data-checks" attribute is not a valid array!')}},equalTo:function(e){let t=e.fieldEl,r=t.closest("form").querySelector('[name="'+t.getAttribute("data-equal-to")+'"]'),l={result:t.value===r.value};return l.result||(l.errors={equalTo:!0}),l},exactLength:function(e){let t=e.fieldEl.value.length,r=1*e.attrValue,l={result:t===r};return l.result||(l.errors={exactLength:!0},t<r?l.errors.minlength=!0:l.errors.maxlength=!0),l},file:function(e){let t=e.fieldEl,r=1*(t.getAttribute("data-max-file-size")||e.fieldOptions.maxFileSize),l=t.accept?new RegExp(t.accept.replace("*","[^\\/,]+")):null,o=Array.from(t.files),n={result:!0};return o.forEach((function(e){let t=r>0&&e.size/1024/1024>r,o=null===l||l.test(e.type);!t&&o||(n.result=!1,void 0===n.errors&&(n.errors={}),n.errors.file=!0,t&&(n.errors.maxFileSize=!0),o||(n.errors.acceptedFileType=!0))})),n},length:function(e){try{let t=e.fieldEl.value.length,r=JSON.parse(e.attrValue),l=t>=r[0],o=t<=r[1],n={result:l&&o};return n.result||(n.errors={stringLength:!0},l||(n.errors.minlength=!0),o||(n.errors.maxlength=!0)),n}catch(e){throw new Error('"data-length" attribute is not a valid array!')}},max:function(e){let r=e.fieldEl,l=r.matches('[type="date"]')||r.matches('[data-subtype="date"]')||r.matches('[data-subtype="dateDDMMYYYY"]'),o=e.fieldEl.value,n=e.attrValue;if(l){let e=t(o);o=2===o.indexOf(e)?o.split(e).reverse():o.split(e),o=o.join(""),n=n.split("-").join("")}o*=1,n*=1;let i={result:o<=n};return i.result||(i.errors={max:!0}),i},maxlength:function(e){const t={result:e.fieldEl.value.length<=1*e.attrValue};return t.result||(t.errors={maxlength:!0}),t},min:function(e){let r=e.fieldEl,l=r.matches('[type="date"]')||r.matches('[data-subtype="date"]')||r.matches('[data-subtype="dateDDMMYYYY"]'),o=e.fieldEl.value,n=e.attrValue;if(l){let e=t(o);o=2===o.indexOf(e)?o.split(e).reverse():o.split(e),o=o.join(""),n=n.split("-").join("")}o*=1,n*=1;let i={result:o>=n};return i.result||(i.errors={min:!0}),i},minlength:function(e){const t={result:e.fieldEl.value.length>=1*e.attrValue};return t.result||(t.errors={minlength:!0}),t},pattern:function(e){let t=e.fieldEl,r=t.pattern,l={result:new RegExp(r).test(t.value)};return l.result||(l.errors={pattern:!0}),l},radio:function(e){let t=e.fieldEl,r=t.closest("form").querySelector('[name="'+t.name+'"]:checked');return{result:null!==r&&r.value.trim().length>0}},requiredFrom:function(e){let t=e.fieldEl,r=t.closest("form"),l=t.value.trim().length>0,o=r.querySelector(t.getAttribute("data-required-from")),n={result:null!==r.querySelector('[name="'+o.name+'"]:checked')};return o.checked&&o.required&&(n.result=l),n.result||(n.errors={requiredFrom:!0}),n}};function u(e,t,l,s){const u=o({},i,{fieldEl:e});if(!r(e))return Promise.resolve(u);const c=e.value.trim().length>0,d=e.required,f=e.matches("[data-required-from]"),p=e.matches("[data-validate-if-filled]");return(({functionsList:e=[],data:t={},stopConditionFn:r=function(){return!1}}={})=>e.reduce((e,t)=>e.then(e=>{let l=o({},e[e.length-1]);return r(l)?Promise.resolve(e):new Promise(e=>{e(t(l))}).then((t=l)=>(e.push(t),e))}),Promise.resolve([t])).then(e=>e.length>1?e.slice(1):e))({functionsList:t.beforeValidation,data:{fieldEl:e}}).then(r=>{let i=r.pop();return new Promise(r=>{!d&&!p&&!f||p&&!c||f&&!d?(i.result=!0,r(i)):r(function(e,t,r,l){const i=e.matches("[data-subtype]")?n(e.getAttribute("data-subtype")):e.type,s=e.value,u=s.trim().length>0,c=Array.from(e.attributes).sort((e,t)=>e.name<t.name),d=[];let f=u,p={result:u,fieldEl:e};return p.result?(c.forEach(r=>{const l=n(r.name.replace("data-","")),o=r.value,i="type"===l&&"function"==typeof a[o],s="function"==typeof a[l];if(i||s){const r={attrName:i?o:l,attrValue:o,fieldEl:e,fieldOptions:t};i||"requiredFrom"===l?d.unshift(r):d.push(r)}}),new Promise(t=>{d.forEach(e=>{const t=a[e.attrName](e);t.result||(p=o({},p,t),f=!1)}),"function"==typeof r[i]?t(r[i](s,e)):t(p)}).then(t=>{if(p=o({},p,t,{fieldEl:e}),p.result=p.result&&f,!p.result){const t="function"==typeof l[i]?l[i](s,e):{};void 0===p.errors&&(p.errors={}),p.errors.rule=!0,p.errors=o({},p.errors,t)}return p})):(p.errors={empty:!0},Promise.resolve(p))}(e,t,l,s))})})}function c(e,t,r,l){t=o({},t,{focusOnRelated:!1});const n=o({},s),i=(e=>{let t="",r="";return Array.from(e).filter(e=>{const l=e.name,o=e.type;return(l!==t||o!==r)&&(e.matches("[data-required-from]")||(t=l,r=o),!0)})})(e.querySelectorAll('input:not([type="reset"]):not([type="submit"]):not([type="button"]):not([type="hidden"]), select, textarea'));return Promise.all(i.map(e=>u(e,t,r,l))).then(e=>{let t=0===e.filter(e=>!e.result).length;return n.result=t,n.fields=e,n})}class d{constructor(t,r){!function(t,r,n){let i=arguments.length,s=e(r);if(0===i||i>0&&!r)throw new Error('First argument "formEl" is missing or falsy!');if(l(r))throw new Error('First argument "formEl" must be a single DOM node or a form CSS selector, not a NodeList!');if(!s.result)throw new Error('First argument "formEl" is not a DOM node nor a form CSS selector!');t.formEl=s.element,t.formEl.formjs=t,t.options=o({},t.constructor.prototype.options,n);let a=t.options.fieldOptions.beforeValidation;t.options.fieldOptions.beforeValidation=Array.isArray(a)?a.map(e=>e.bind(t)):a.bind(t)}(this,t,r)}destroy(){delete this.formEl.formjs}validateField(e,t={}){return u(e="string"==typeof e?this.formEl.querySelector(e):e,t=o({},this.options.fieldOptions,t),this.validationRules,this.validationErrors)}validateForm(e={}){return e=o({},this.options.fieldOptions,e),c(this.formEl,e,this.validationRules,this.validationErrors)}static addValidationErrors(e){this.prototype.validationErrors=o({},this.prototype.validationErrors,e)}static addValidationRules(e){this.prototype.validationRules=o({},this.prototype.validationRules,e)}static setOptions(e){this.prototype.options=o({},this.prototype.options,e)}}d.prototype.isInitialized=!1,d.prototype.options={fieldOptions:{beforeValidation:[],maxFileSize:10}},d.prototype.validationErrors={},d.prototype.validationRules={date:function(e){return{result:/^((((19|[2-9]\d)\d{2})[ \/\-.](0[13578]|1[02])[ \/\-.](0[1-9]|[12]\d|3[01]))|(((19|[2-9]\d)\d{2})[ \/\-.](0[13456789]|1[012])[ \/\-.](0[1-9]|[12]\d|30))|(((19|[2-9]\d)\d{2})[ \/\-.]02[ \/\-.](0[1-9]|1\d|2[0-8]))|(((1[6-9]|[2-9]\d)(0[48]|[2468][048]|[13579][26])|((16|[2468][048]|[3579][26])00))[ \/\-.]02[ \/\-.]29))$/g.test(e)}},email:function(e){return{result:/^[a-zA-Z_-]([\w.-]?[a-zA-Z0-9])*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.([a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?){2,})+$/.test(e)}},number:function(e){return{result:/[+-]?([0-9]*[.])?[0-9]+/.test(e)}}},d.prototype.version="4.0.2";export default d;
//# sourceMappingURL=formjs-esm.min.js.map
